{"version":3,"file":"4-BDU29IXi.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/login/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/4.js"],"sourcesContent":["import { r as redirect, f as fail } from \"../../../chunks/index2.js\";\nimport { a as authenticateUser, c as createSession } from \"../../../chunks/auth.js\";\nconst load = async ({ locals }) => {\n  if (locals.user) {\n    redirect(302, \"/dashboard\");\n  }\n  return {};\n};\nconst actions = {\n  default: async ({ request, cookies }) => {\n    const data = await request.formData();\n    const email = data.get(\"email\");\n    const password = data.get(\"password\");\n    if (!email || !password) {\n      return fail(400, {\n        error: \"Email and password are required\",\n        email\n      });\n    }\n    try {\n      const user = await authenticateUser(email, password);\n      if (!user) {\n        return fail(400, {\n          error: \"Invalid email or password\",\n          email\n        });\n      }\n      const sessionId = await createSession(user.id);\n      cookies.set(\"session\", sessionId, {\n        path: \"/\",\n        maxAge: 60 * 60 * 24 * 30,\n        // 30 days\n        httpOnly: true,\n        secure: true,\n        sameSite: \"strict\"\n      });\n      redirect(302, \"/dashboard\");\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      return fail(500, {\n        error: \"An error occurred during login. Please try again.\",\n        email\n      });\n    }\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/login/_page.server.ts.js';\n\nexport const index = 4;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/login/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/login/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/4.Do5gZPa_.js\",\"_app/immutable/chunks/CWj6FrbW.js\",\"_app/immutable/chunks/dzk7Jg2D.js\",\"_app/immutable/chunks/dupZhlXE.js\",\"_app/immutable/chunks/x2hAFOQ2.js\",\"_app/immutable/chunks/DdxBX0KZ.js\",\"_app/immutable/chunks/jDb7IAEd.js\",\"_app/immutable/chunks/iLG2255Q.js\",\"_app/immutable/chunks/BnM-H2vA.js\",\"_app/immutable/chunks/C8gFv3Qf.js\",\"_app/immutable/chunks/COjZQ44n.js\",\"_app/immutable/chunks/h5jIJnHw.js\",\"_app/immutable/chunks/Mw_qvY5x.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;;;;;;;AAEA,MAAM,IAAI,GAAG,OAAO,EAAE,MAAM,EAAE,KAAK;AACnC,EAAE,IAAI,MAAM,CAAC,IAAI,EAAE;AACnB,IAAI,QAAQ,CAAC,GAAG,EAAE,YAAY,CAAC;AAC/B,EAAE;AACF,EAAE,OAAO,EAAE;AACX,CAAC;AACD,MAAM,OAAO,GAAG;AAChB,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK;AAC3C,IAAI,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,EAAE;AACzC,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;AACnC,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;AACzC,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,EAAE;AAC7B,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE;AACvB,QAAQ,KAAK,EAAE,iCAAiC;AAChD,QAAQ;AACR,OAAO,CAAC;AACR,IAAI;AACJ,IAAI,IAAI;AACR,MAAM,MAAM,IAAI,GAAG,MAAM,gBAAgB,CAAC,KAAK,EAAE,QAAQ,CAAC;AAC1D,MAAM,IAAI,CAAC,IAAI,EAAE;AACjB,QAAQ,OAAO,IAAI,CAAC,GAAG,EAAE;AACzB,UAAU,KAAK,EAAE,2BAA2B;AAC5C,UAAU;AACV,SAAS,CAAC;AACV,MAAM;AACN,MAAM,MAAM,SAAS,GAAG,MAAM,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC;AACpD,MAAM,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE;AACxC,QAAQ,IAAI,EAAE,GAAG;AACjB,QAAQ,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;AACjC;AACA,QAAQ,QAAQ,EAAE,IAAI;AACtB,QAAQ,MAAM,EAAE,IAAI;AACpB,QAAQ,QAAQ,EAAE;AAClB,OAAO,CAAC;AACR,MAAM,QAAQ,CAAC,GAAG,EAAE,YAAY,CAAC;AACjC,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;AACpB,MAAM,OAAO,CAAC,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC;AAC1C,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE;AACvB,QAAQ,KAAK,EAAE,mDAAmD;AAClE,QAAQ;AACR,OAAO,CAAC;AACR,IAAI;AACJ,EAAE;AACF,CAAC;;;;;;;;AC3CW,MAAC,KAAK,GAAG;AACrB,IAAI,eAAe;AACP,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAwC,CAAC,EAAE;AAEtG,MAAC,SAAS,GAAG;AACb,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC;AAChe,MAAC,WAAW,GAAG;AACf,MAAC,KAAK,GAAG;;;;"}