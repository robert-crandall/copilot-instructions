{"version":3,"file":"6-BnCVRU5y.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/register/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/6.js"],"sourcesContent":["import { r as redirect, f as fail } from \"../../../chunks/index2.js\";\nimport { g as getUserByEmail, b as createUser, c as createSession } from \"../../../chunks/auth.js\";\nconst load = async ({ locals }) => {\n  if (locals.user) {\n    redirect(302, \"/dashboard\");\n  }\n  return {};\n};\nconst actions = {\n  default: async ({ request, cookies }) => {\n    const data = await request.formData();\n    const email = data.get(\"email\");\n    const password = data.get(\"password\");\n    const confirmPassword = data.get(\"confirmPassword\");\n    const displayName = data.get(\"displayName\");\n    if (!email || !password || !confirmPassword || !displayName) {\n      return fail(400, {\n        error: \"All fields are required\",\n        email,\n        displayName\n      });\n    }\n    if (password !== confirmPassword) {\n      return fail(400, {\n        error: \"Passwords do not match\",\n        email,\n        displayName\n      });\n    }\n    if (password.length < 8) {\n      return fail(400, {\n        error: \"Password must be at least 8 characters long\",\n        email,\n        displayName\n      });\n    }\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      return fail(400, {\n        error: \"Please enter a valid email address\",\n        email,\n        displayName\n      });\n    }\n    try {\n      const existingUser = await getUserByEmail(email);\n      if (existingUser) {\n        return fail(400, {\n          error: \"An account with this email already exists\",\n          email,\n          displayName\n        });\n      }\n      const user = await createUser(email, password, displayName);\n      const sessionId = await createSession(user.id);\n      cookies.set(\"session\", sessionId, {\n        path: \"/\",\n        maxAge: 60 * 60 * 24 * 30,\n        // 30 days\n        httpOnly: true,\n        secure: true,\n        sameSite: \"strict\"\n      });\n      redirect(302, \"/dashboard\");\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      return fail(500, {\n        error: \"An error occurred during registration. Please try again.\",\n        email,\n        displayName\n      });\n    }\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/register/_page.server.ts.js';\n\nexport const index = 6;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/register/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/register/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/6.VTCTj8VN.js\",\"_app/immutable/chunks/CWj6FrbW.js\",\"_app/immutable/chunks/dzk7Jg2D.js\",\"_app/immutable/chunks/dupZhlXE.js\",\"_app/immutable/chunks/x2hAFOQ2.js\",\"_app/immutable/chunks/DdxBX0KZ.js\",\"_app/immutable/chunks/jDb7IAEd.js\",\"_app/immutable/chunks/iLG2255Q.js\",\"_app/immutable/chunks/BnM-H2vA.js\",\"_app/immutable/chunks/C8gFv3Qf.js\",\"_app/immutable/chunks/COjZQ44n.js\",\"_app/immutable/chunks/h5jIJnHw.js\",\"_app/immutable/chunks/Mw_qvY5x.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}